---
title: "Building a Hugo Academic Site with `hugodown`"
author: "Jelmer Poelstra"
date: "10/1/2020"
output: html_document
---

```{r}
setwd('~/Dropbox/mcic/website/hugodown/')

hugodown::hugo_start()

hugodown::hugo_build(dest = "docs")
```

## TODO

-   RSS and "sign up for new posts"

## Workflow

-   Following [Nate Kratzer's post](https://www.natekratzer.com/post/using_hugodown/):

```{r}
devtools::install_github("r-lib/hugodown")    # Intall hugodown
hugodown::hugo_install("0.66.0")              # Install hugo
hugodown::create_site_academic()              # Create site skeleton for academic theme
#source('../myhugodown.R'); library(fs); library(rlang); library(hugodown); create_site_academic2() # Needed because of error

hugodown::hugo_start()                        # Preview site
hugodown::use_post("post/welcome-to-codeclub")# Create a new post

hugodown::hugo_build(dest = "docs")           # Build site

file.create("static/.nojekyll")               # .nojekyll file for Github
usethis::use_git()
```

-   **Add line `publishDir = 'docs'` to `config.toml`**

-   \[[hugodown](https://hugodown.r-lib.org/articles/deploy.html) suggests to "Set `baseURL` to the url where you site will be published", but I did not do this.\]

-   Personalization:

    -   Deactivated many of the widgets in `content/home/`

    -   Edited `config/_default/menus.toml`

    -   Edited `config/_default/params.toml`

    -   Edited `config.toml`

    -   Author info: `content/authors/admin`

    -   Removed `content/privacy.md` and `content/terms.md` and added `license.md` -- same as on personal site

    -   Copied `themes/hugo-academic/layouts/partials/site_footer.html` to `layouts/partials/site_footer.html`, then changed `terms.md` to `license.md`.

    -   Added a favicon by following [these](https://wowchemy.com/docs/customization/#website-icon) instructions, though I just used a 16x16 pixel icon from [this OSU site](https://www.osu.edu/assets/web/favicon/1.0.1/).

-   Dropdown menu:

    -   "To create a dropdown sub-menu, add `identifier = "something"` to the parent item and `parent = "something"` to the child item."

## Info

-   Images in posts:

    -   Put in post folder -- refer to with leading `./`!
        `![Top matter for a hugodown post](./top_of_hugodown.png)`

    -   Put in `static/img` -- refer to without `static`!
        `![Top matter for a hugodown post](/img/top_of_hugodown.png)`

-   **Remember to knit each .Rmd!!!**

## 
